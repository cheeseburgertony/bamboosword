"use strict";(self.webpackChunkbamboosword=self.webpackChunkbamboosword||[]).push([[727],{"./src/components/Upload/upload.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CheckUpload:()=>CheckUpload,DragUpload:()=>DragUpload,SimpleUpload:()=>SimpleUpload,__namedExportsOrder:()=>__namedExportsOrder,default:()=>upload_stories});var react=__webpack_require__("./node_modules/react/index.js"),axios=__webpack_require__("./node_modules/axios/lib/axios.js"),icon=__webpack_require__("./src/components/Icon/icon.tsx"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const Progress=props=>{const{percent,strokeHeight=15,showText=!0,styles,theme="primary"}=props;return(0,jsx_runtime.jsx)("div",{className:"bamboosword-progress-bar",style:styles,children:(0,jsx_runtime.jsx)("div",{className:"bamboosword-progress-bar-outer",style:{height:`${strokeHeight}px`},children:(0,jsx_runtime.jsx)("div",{className:`bamboosword-progress-bar-inner color-${theme}`,style:{width:`${percent}%`},children:showText&&(0,jsx_runtime.jsx)("span",{className:"inner-text",children:`${percent}%`})})})})},progress=Progress;Progress.__docgenInfo={description:"",methods:[],displayName:"Progress",props:{percent:{required:!0,tsType:{name:"number"},description:""},strokeHeight:{required:!1,tsType:{name:"number"},description:""},showText:{required:!1,tsType:{name:"boolean"},description:""},styles:{required:!1,tsType:{name:"ReactCSSProperties",raw:"React.CSSProperties"},description:""},theme:{required:!1,tsType:{name:"union",raw:"'primary' | 'secondary' | 'success' | 'info' | 'warning' | 'danger' | 'light' | 'dark'",elements:[{name:"literal",value:"'primary'"},{name:"literal",value:"'secondary'"},{name:"literal",value:"'success'"},{name:"literal",value:"'info'"},{name:"literal",value:"'warning'"},{name:"literal",value:"'danger'"},{name:"literal",value:"'light'"},{name:"literal",value:"'dark'"}]},description:""}}};const UploadList=props=>{const{fileList,onRemove}=props;return console.log("filelist",fileList),(0,jsx_runtime.jsx)("ul",{className:"bamboosword-upload-list",children:fileList.map((item=>(0,jsx_runtime.jsxs)("li",{className:"bamboosword-upload-list-item",children:[(0,jsx_runtime.jsxs)("span",{className:`file-name file-name-${item.status}`,children:[(0,jsx_runtime.jsx)(icon.A,{icon:"file-alt",theme:"secondary"}),item.name]}),(0,jsx_runtime.jsxs)("span",{className:"file-status",children:[("uploading"===item.status||"ready"===item.status)&&(0,jsx_runtime.jsx)(icon.A,{icon:"spinner",spin:!0,theme:"primary"}),"success"===item.status&&(0,jsx_runtime.jsx)(icon.A,{icon:"check-circle",theme:"success"}),"error"===item.status&&(0,jsx_runtime.jsx)(icon.A,{icon:"times-circle",theme:"danger"})]}),(0,jsx_runtime.jsx)("span",{className:"file-actions",children:(0,jsx_runtime.jsx)(icon.A,{icon:"times",onClick:()=>{onRemove(item)}})}),"uploading"===item.status&&(0,jsx_runtime.jsx)(progress,{percent:item.percent||0})]},item.uid)))})},upload_list=UploadList;UploadList.__docgenInfo={description:"",methods:[],displayName:"UploadList",props:{fileList:{required:!0,tsType:{name:"Array",elements:[{name:"UploadFile"}],raw:"UploadFile[]"},description:""},onRemove:{required:!0,tsType:{name:"signature",type:"function",raw:"(_file: UploadFile) => void",signature:{arguments:[{type:{name:"UploadFile"},name:"_file"}],return:{name:"void"}}},description:""}}};var classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames);const Dragger=(0,react.memo)((props=>{const{children,onFile}=props,[dragOver,setDragOver]=(0,react.useState)(!1),classes=classnames_default()("bamboosword-uploader-dragger",{"is-dragover":dragOver}),handleDrag=(e,over)=>{e.preventDefault(),setDragOver(over)};return(0,jsx_runtime.jsx)("div",{className:classes,onDragOver:e=>handleDrag(e,!0),onDragLeave:e=>handleDrag(e,!1),onDrop:e=>{e.preventDefault(),setDragOver(!1),onFile(e.dataTransfer.files)},children})})),dragger=Dragger;Dragger.__docgenInfo={description:"",methods:[],displayName:"Dragger",props:{onFile:{required:!0,tsType:{name:"signature",type:"function",raw:"(file: FileList) => void",signature:{arguments:[{type:{name:"FileList"},name:"file"}],return:{name:"void"}}},description:""},children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};const Upload=(0,react.memo)((props=>{const{action,defaultFileList,onProgress,onSuccess,onError,beforeUpload,onChange,onRemove,headers,name="file",data,withCredentials,accept,multiple,drag,children}=props,[fileList,setFileList]=(0,react.useState)(defaultFileList||[]),inputRef=(0,react.useRef)(null),updateFileList=(updateFile,updateObj)=>{setFileList((prevList=>prevList.map((file=>file.uid===updateFile.uid?{...file,...updateObj}:file))))},post=file=>{let _file={uid:Date.now()+"uplpad-file",status:"ready",name:file.name,size:file.size,percent:0,raw:file};setFileList((prevList=>[_file,...prevList]));const formData=new FormData;formData.append(name||"file",file),data&&Object.keys(data).forEach((key=>{formData.append(key,data[key])})),axios.A.post(action,formData,{headers:{...headers,"Content-Type":"multipart/form-data"},onUploadProgress:e=>{var _e$total;let percentage=Math.round(100*e.loaded/(null!==(_e$total=e.total)&&void 0!==_e$total?_e$total:1))||0;percentage<100&&(updateFileList(_file,{percent:percentage,status:"uploading"}),onProgress&&onProgress(percentage,file))},withCredentials}).then((res=>{console.log(res),updateFileList(_file,{status:"success",response:res.data}),onSuccess&&onSuccess(res.data,file),onChange&&onChange(file)})).catch((err=>{console.error(err),updateFileList(_file,{status:"error",error:err}),onError&&onError(err,file),onChange&&onChange(file)}))},uploadFilesHandle=files=>{Array.from(files).forEach((file=>{if(beforeUpload){const result=beforeUpload(file);result&&result instanceof Promise?result.then((processedFile=>{post(processedFile)})):!1!==result&&post(file)}else post(file)}))};return(0,jsx_runtime.jsxs)("div",{className:"bamboosword-upload-component",children:[(0,jsx_runtime.jsxs)("div",{className:"bamboosword-upload-input",style:{display:"inline-block"},onClick:()=>{inputRef.current&&inputRef.current.click()},children:[drag?(0,jsx_runtime.jsx)(dragger,{onFile:files=>uploadFilesHandle(files),children}):children,(0,jsx_runtime.jsx)("input",{className:"bamboosword-file-input",style:{display:"none"},ref:inputRef,type:"file",onChange:e=>{const files=e.target.files;files&&(uploadFilesHandle(files),inputRef.current&&(inputRef.current.value=""))},accept,multiple})]}),(0,jsx_runtime.jsx)(upload_list,{fileList,onRemove:file=>{setFileList((prevList=>prevList.filter((item=>item.uid!==file.uid)))),onRemove&&onRemove(file)}})]})}));Upload.__docgenInfo={description:"通过点击或者拖拽上传文件\n### 引用方法\n\n~~~js\nimport { Upload } from 'bamboosword'\n~~~",methods:[],displayName:"Upload",props:{action:{required:!0,tsType:{name:"string"},description:"必选参数, 上传的地址"},defaultFileList:{required:!1,tsType:{name:"Array",elements:[{name:"UploadFile"}],raw:"UploadFile[]"},description:"上传的文件列表,"},beforeUpload:{required:!1,tsType:{name:"signature",type:"function",raw:"(file: File) => boolean | Promise<File>",signature:{arguments:[{type:{name:"File"},name:"file"}],return:{name:"union",raw:"boolean | Promise<File>",elements:[{name:"boolean"},{name:"Promise",elements:[{name:"File"}],raw:"Promise<File>"}]}}},description:"上传文件之前的钩子，参数为上传的文件，若返回 false 或者 Promise 则停止上传。"},onProgress:{required:!1,tsType:{name:"signature",type:"function",raw:"(percentage: number, file: File) => void",signature:{arguments:[{type:{name:"number"},name:"percentage"},{type:{name:"File"},name:"file"}],return:{name:"void"}}},description:"文件上传时的钩子"},onSuccess:{required:!1,tsType:{name:"signature",type:"function",raw:"(data: any, file: File) => void",signature:{arguments:[{type:{name:"any"},name:"data"},{type:{name:"File"},name:"file"}],return:{name:"void"}}},description:"文件上传成功时的钩子"},onError:{required:!1,tsType:{name:"signature",type:"function",raw:"(err: any, file: File) => void",signature:{arguments:[{type:{name:"any"},name:"err"},{type:{name:"File"},name:"file"}],return:{name:"void"}}},description:"文件上传失败时的钩子"},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(file: File) => void",signature:{arguments:[{type:{name:"File"},name:"file"}],return:{name:"void"}}},description:"文件状态改变时的钩子，上传成功或者失败时都会被调用"},onRemove:{required:!1,tsType:{name:"signature",type:"function",raw:"(file: UploadFile) => void",signature:{arguments:[{type:{name:"UploadFile"},name:"file"}],return:{name:"void"}}},description:"文件列表移除文件时的钩子"},headers:{required:!1,tsType:{name:"signature",type:"object",raw:"{ [key: string]: any }",signature:{properties:[{key:{name:"string"},value:{name:"any",required:!0}}]}},description:"设置上传的请求头部"},name:{required:!1,tsType:{name:"string"},description:"上传的文件字段名"},data:{required:!1,tsType:{name:"signature",type:"object",raw:"{ [key: string]: any }",signature:{properties:[{key:{name:"string"},value:{name:"any",required:!0}}]}},description:"上传时附带的额外参数"},withCredentials:{required:!1,tsType:{name:"boolean"},description:"支持发送 cookie 凭证信息"},accept:{required:!1,tsType:{name:"string"},description:"可选参数, 接受上传的文件类型"},multiple:{required:!1,tsType:{name:"boolean"},description:"是否支持多选文件"},drag:{required:!1,tsType:{name:"boolean"},description:"是否支持拖拽上传"},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};var Button_button=__webpack_require__("./src/components/Button/button.tsx");const upload_stories={title:"Upload",component:Upload,tags:["autodocs"]},SimpleUpload={render:args=>(0,jsx_runtime.jsx)(Upload,{...args,action:"https://run.mocky.io/v3/34786f50-6906-4010-87fd-2a8d83b7f967",children:(0,jsx_runtime.jsxs)(Button_button.A,{size:"lg",btnType:"primary",children:[(0,jsx_runtime.jsx)(icon.A,{icon:"upload"})," 点击上传 "]})}),storyName:"普通的Upload组件"},CheckUpload={render:args=>(0,jsx_runtime.jsx)(Upload,{...args,action:"https://run.mocky.io/v3/34786f50-6906-4010-87fd-2a8d83b7f967",beforeUpload:file=>!(Math.round(file.size/1024)>50)||(alert("file too big"),!1),children:(0,jsx_runtime.jsxs)(Button_button.A,{size:"lg",btnType:"primary",children:[(0,jsx_runtime.jsx)(icon.A,{icon:"upload"})," 不能上传大于50Kb！的文件 "]})}),storyName:"上传前检查文件大小"},DragUpload={render:args=>(0,jsx_runtime.jsxs)(Upload,{...args,action:"https://run.mocky.io/v3/34786f50-6906-4010-87fd-2a8d83b7f967",name:"fileName",multiple:!0,drag:!0,children:[(0,jsx_runtime.jsx)(icon.A,{icon:"upload",size:"5x",theme:"secondary"}),(0,jsx_runtime.jsx)("br",{}),(0,jsx_runtime.jsx)("p",{children:"点击或者拖动到此区域进行上传"})]}),storyName:"拖动上传"},__namedExportsOrder=["SimpleUpload","CheckUpload","DragUpload"];SimpleUpload.parameters={...SimpleUpload.parameters,docs:{...SimpleUpload.parameters?.docs,source:{originalSource:'{\n  render: args => <Upload {...args} action=\'https://run.mocky.io/v3/34786f50-6906-4010-87fd-2a8d83b7f967\'>\n      <Button size="lg" btnType="primary"><Icon icon="upload" /> 点击上传 </Button>\n    </Upload>\n}',...SimpleUpload.parameters?.docs?.source}}},CheckUpload.parameters={...CheckUpload.parameters,docs:{...CheckUpload.parameters?.docs,source:{originalSource:'{\n  render: args => {\n    const checkFileSize = (file: File) => {\n      if (Math.round(file.size / 1024) > 50) {\n        alert(\'file too big\');\n        return false;\n      }\n      return true;\n    };\n    return <Upload {...args} action=\'https://run.mocky.io/v3/34786f50-6906-4010-87fd-2a8d83b7f967\' beforeUpload={checkFileSize}>\n        <Button size="lg" btnType="primary"><Icon icon="upload" /> 不能上传大于50Kb！的文件 </Button>\n      </Upload>;\n  }\n}',...CheckUpload.parameters?.docs?.source}}},DragUpload.parameters={...DragUpload.parameters,docs:{...DragUpload.parameters?.docs,source:{originalSource:'{\n  render: args => {\n    return <Upload {...args} action=\'https://run.mocky.io/v3/34786f50-6906-4010-87fd-2a8d83b7f967\' name="fileName" multiple drag>\n        <Icon icon="upload" size="5x" theme="secondary" />\n        <br />\n        <p>点击或者拖动到此区域进行上传</p>\n      </Upload>;\n  }\n}',...DragUpload.parameters?.docs?.source}}}},"./src/components/Button/button.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$:()=>Button,A:()=>__WEBPACK_DEFAULT_EXPORT__});var classnames__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_0__),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js");const Button=(0,react__WEBPACK_IMPORTED_MODULE_1__.memo)((props=>{const{btnType="default",disabled=!1,className,size,children,href,...restProps}=props,classes=classnames__WEBPACK_IMPORTED_MODULE_0___default()("btn",className,{[`btn-${btnType}`]:btnType,[`btn-${size}`]:size,disabled:"link"===btnType&&disabled});return"link"===btnType&&href?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("a",{className:classes,href,...restProps,children}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("button",{className:classes,disabled,...restProps,children})})),__WEBPACK_DEFAULT_EXPORT__=Button;Button.__docgenInfo={description:"页面中最常用的的按钮元素，适合于完成特定的交互，支持 HTML button 和 a 链接 的所有属性\n### 引用方法\n\n```javascript\nimport { Button } from 'bamboosword'\n```",methods:[],displayName:"Button",props:{className:{required:!1,tsType:{name:"string"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:"设置 Button 的禁用"},size:{required:!1,tsType:{name:"union",raw:"'lg' | 'sm'",elements:[{name:"literal",value:"'lg'"},{name:"literal",value:"'sm'"}]},description:"设置 Button 的尺寸"},btnType:{required:!1,tsType:{name:"union",raw:"'primary' | 'default' | 'danger' | 'link'",elements:[{name:"literal",value:"'primary'"},{name:"literal",value:"'default'"},{name:"literal",value:"'danger'"},{name:"literal",value:"'link'"}]},description:"设置 Button 的类型"},children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},href:{required:!1,tsType:{name:"string"},description:""}}}},"./src/components/Icon/icon.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__,I:()=>Icon});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@fortawesome/react-fontawesome/index.es.js"),classnames__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_2__),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/jsx-runtime.js");const Icon=(0,react__WEBPACK_IMPORTED_MODULE_0__.memo)((props=>{const{theme,className,...restProps}=props,classes=classnames__WEBPACK_IMPORTED_MODULE_2___default()("bamboosword-icon",className,{[`icon-${theme}`]:theme});return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_1__.g,{className:classes,...restProps})})),__WEBPACK_DEFAULT_EXPORT__=Icon;Icon.__docgenInfo={description:"提供了一套常用的图标集合 基于 react-fontawesome。\n\n支持 react-fontawesome的所有属性 可以在这里查询 https://github.com/FortAwesome/react-fontawesome#basic\n\n支持 fontawesome 所有 free-solid-icons，可以在这里查看所有图标 https://fontawesome.com/icons?d=gallery&s=solid&m=free\n### 引用方法\n\n~~~js\nimport { Icon } from 'bamboosword'\n~~~",methods:[],displayName:"Icon",props:{theme:{required:!1,tsType:{name:"union",raw:"'primary' | 'secondary' | 'success' | 'info' | 'warning' | 'danger' | 'light' | 'dark'",elements:[{name:"literal",value:"'primary'"},{name:"literal",value:"'secondary'"},{name:"literal",value:"'success'"},{name:"literal",value:"'info'"},{name:"literal",value:"'warning'"},{name:"literal",value:"'danger'"},{name:"literal",value:"'light'"},{name:"literal",value:"'dark'"}]},description:"支持框架主题 根据主题显示不同的颜色"}},composes:["FontAwesomeIconProps"]}}}]);